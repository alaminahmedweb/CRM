@model DateRangeVM
@{
    ViewData["Title"] = "MIS Report";
}
<div class="row mb-4">
    <div class="col-lg-3 col-md-3 col-sm-3 col-2"></div>
    <div class="col-lg-6 col-md-12 col-sm-12 col-12 bg-white">
        <div class="form-group">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12" style="display: flex;justify-content: space-between;margin-left: 18px;">
                <div class="col-lg-12 col-md-6 col-sm-6 col-12">
                    <h3 class=" pl-1 text-info text-center" style="font-weight:600"> MIS Report</h3>
                </div>
            </div>
        </div>
        <hr style="margin: 0.1rem 0;" />
        <form>
            <div class="form-group row pt-1 pb-3" style="margin-left: 38px;margin-right:20px;opacity:1 !important;">
                <div class="col-lg-6 col-md-6 col-sm-12 col-6">
                    <div>
                        <label for="DateFrom" class="form-label">Date From</label>
                        <input asp-for="DateFrom" class="form-control" />
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 col-6">
                    <div>
                        <label for="DateTo" class="form-label">Date To</label>
                        <input asp-for="DateTo" class="form-control" />
                    </div>
                </div>
            </div>
            <div class="form-group row pb-3" style="margin-left: 38px;margin-right:20px;opacity:1 !important;">
                <div class="col-lg-6 col-md-6 col-sm-6 col-6">
                    <div>
                        <label for="EmployeeId" class="form-label">Select Contact</label>
                        <select asp-for="ContactId" class="form-control" title="searchableDropdown">
                            <option value="-1">Please Select Contact</option>
                            @foreach (var data in ViewBag.ContactList)
                            {
                                <option value="@data.Id">@data.Name</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-6 col-6">
                    <div>
                        <label for="EmployeeId" class="form-label">Select Mpo</label>
                        <select asp-for="EmployeeId" class="form-control" title="searchableDropdown">
                            <option value="-1">Please Select Mpo</option>
                            @foreach (var data in ViewBag.EmployeeList)
                            {
                                <option value="@data.Id">@data.Name</option>
                            }
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group row pb-3" style="margin-left: 38px;margin-right:20px;opacity:1 !important;">
                <div class="col-lg-6 col-md-6 col-sm-6 col-6">
                    <div>
                        <label for="CategoryId" class="form-label">Select Category</label>
                        <select asp-for="CategoryId" class="form-control" title="searchableDropdown">
                            <option value="-1">Please Select Category</option>
                            @foreach (var data in ViewBag.CategoryList)
                            {
                                <option value="@data.Id">@data.Name</option>
                            }
                        </select>
                    </div>
                </div>
            </div>

            <div id="accordion" style="margin: 10px 23px 20px 42px">
                <div class="report">
                    <div class="report-header">
                        <a class="btn" data-bs-toggle="collapse" href="#collapseOne">
                            Customer Releated Reports
                        </a>
                    </div>
                    <div id="collapseOne" class="collapse" data-bs-parent="#accordion">
                        <div class="report-body">
                            <div class="d-grid gap-1">
                                <button type="submit" id="btnNewCustomerList" class="btn btn-primary btn-block">New Customer List</button>
                                <button type="submit" id="btnContactWiseNewCustomerList" class="btn btn-primary btn-block">Contact Wise New Customer List</button>
                                <button type="submit" id="btnStatusWiseNewCustomerList" class="btn btn-primary ml-2">Status Wise New Customer List</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="report">
                    <div class="report-header">
                        <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseTwo">
                            Followup Releated Reports
                        </a>
                    </div>
                    <div id="collapseTwo" class="collapse" data-bs-parent="#accordion">
                        <div class="report-body">
                            <div class="d-grid gap-1">
                                <button type="submit" id="btnShowDoneFollowupList" class="btn btn-primary ml-2">Show Followup Done List - Details</button>
                                <button type="submit" id="btnStatusWiseDoneFollowupList" class="btn btn-primary ml-2">Show Followup Done List - Status Wise</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="report">
                    <div class="report-header">
                        <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseThree">
                            Booking Releated Reports
                        </a>
                    </div>
                    <div id="collapseThree" class="collapse" data-bs-parent="#accordion">
                        <div class="report-body">
                            <div class="d-grid gap-1">
                                <button type="submit" id="btnEntryDateWiseBookingList" class="btn btn-primary ml-2">Show Booking List (Entry Date Wise)</button>
                                <button type="submit" id="btnBookingDateWiseBookingList" class="btn btn-primary ml-2">Show Booking List (Booking Date Wise)</button>
                                <button type="submit" id="btnShiftedBookingList" class="btn btn-primary ml-2">Show Booking Shifting List</button>
                                <button type="submit" id="btnCancelBookingList" class="btn btn-primary ml-2">Show Booking Cancel List</button>
                                <button type="submit" id="btnDueBookingList" class="btn btn-primary ml-2">Show Due Booking List</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="report">
                    <div class="report-header">
                        <a class="collapsed btn" data-bs-toggle="collapse" href="#collapseFour">
                            Collection Releated Reports
                        </a>
                    </div>
                    <div id="collapseFour" class="collapse" data-bs-parent="#accordion">
                        <div class="report-body">
                            <div class="d-grid gap-1">
                                <button type="submit" id="btnCollectionReport" class="btn btn-primary ml-2">Show Collection Report</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script type="text/javascript">
        $(document).ready(function () {

            var today = new Date();
            var dd = String(today.getDate()).padStart(2, '0');
            var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!

            var currentDate = today.getFullYear() + "-" + mm + "-" + dd;
            $('#DateFrom').val(currentDate);
            $('#DateTo').val(currentDate);
            var datefrom = currentDate;
            var dateto = currentDate;
            var sumtotal = $('#sumTotal');

            var resultDiv = $('#resultDiv');
            var resultdatatableDiv = $('#resultdataTableDiv');

            var resultdataTablebody = $('#resultdataTable tbody');
            var resultdataTableHead = $('#resultdataTable thead');

            var resultbody = $('#resultTable tbody');
            var resultHead = $('#resultTable thead');

            $('#btnNewCustomerList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                var mpoId = $('#EmployeeId').val();
                var contactid = $('#ContactId').val();
                var categoryId = $('#CategoryId').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/ShowNewCustomerList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "&employeeId=" + mpoId + "&contactid="+ contactid +"&categoryId="+ categoryId + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });

            });

            $('#btnContactWiseNewCustomerList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/ContactWiseNewCustomerList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnStatusWiseNewCustomerList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/StatusWiseNewCustomerList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnStatusWiseDoneFollowupList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/StatusWiseFollowupDoneList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnShowDoneFollowupList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/ShowFollowupDoneList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnEntryDateWiseBookingList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                var url = '@Url.Action("ShowEntryDateWiseBookingList", "MISReport")' +
                          '?dateFrom=' + encodeURIComponent(dateFrom) +
                          '&dateTo=' + encodeURIComponent(dateTo);
                window.open(url, '_blank');
            });

            // $('#btnEntryDateWiseBookingList').click(function () {
            //     var dateFrom = $('#DateFrom').val();
            //     var dateTo = $('#DateTo').val();
            //     $.ajax({
            //         type: "GET",
            //         url: "@Url.Action("GetSuccessData", "MISReport")",
            //         contentType: "application/json; charset=utf-8",
            //         dataType: "json",
            //         success: function (result) {
            //             window.location.href = "/MISReport/ShowEntryDateWiseBookingList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
            //         },
            //         error: function (xhr, ajaxOptions, thrownError) {
            //             // handle error
            //         }
            //     });
            // });

            // $('#btnBookingDateWiseBookingList').click(function () {
            //     var dateFrom = $('#DateFrom').val();
            //     var dateTo = $('#DateTo').val();
            //     $.ajax({
            //         type: "GET",
            //         url: "@Url.Action("GetSuccessData", "MISReport")",
            //         contentType: "application/json; charset=utf-8",
            //         dataType: "json",
            //         success: function (result) {
            //             window.location.href = "/MISReport/ShowBookingDateWiseBookingList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
            //         },
            //         error: function (xhr, ajaxOptions, thrownError) {
            //             // handle error
            //         }
            //     });
            // });

            $('#btnBookingDateWiseBookingList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                var url = '@Url.Action("ShowBookingDateWiseBookingList", "MISReport")' +
                          '?dateFrom=' + encodeURIComponent(dateFrom) +
                          '&dateTo=' + encodeURIComponent(dateTo);
                window.open(url, '_blank');
            });

            $('#btnCancelBookingList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/ShowBookingCancelList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnShiftedBookingList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/ShowBookingShiftingList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnDueBookingList').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                $.ajax({
                    type: "GET",
                    url: "@Url.Action("GetSuccessData", "MISReport")",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        window.location.href = "/MISReport/ShowDueBookingList?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
                    },
                    error: function (xhr, ajaxOptions, thrownError) {
                        // handle error
                    }
                });
            });

            $('#btnCollectionReport').click(function () {
                var dateFrom = $('#DateFrom').val();
                var dateTo = $('#DateTo').val();
                var url = '@Url.Action("ShowCollectionReport", "MISReport")' +
                          '?dateFrom=' + encodeURIComponent(dateFrom) +
                          '&dateTo=' + encodeURIComponent(dateTo);
                window.open(url, '_blank');
            });

            // $('#btnCollectionReport').click(function () {
            //     var dateFrom = $('#DateFrom').val();
            //     var dateTo = $('#DateTo').val();
            //     $.ajax({
            //         type: "GET",
            //         url: "@Url.Action("GetSuccessData", "MISReport")",
            //         contentType: "application/json; charset=utf-8",
            //         dataType: "json",
            //         success: function (result) {
            //             window.location.href = "/MISReport/ShowCollectionReport?dateFrom=" + dateFrom + "&dateTo=" + dateTo + "";
            //         },
            //         error: function (xhr, ajaxOptions, thrownError) {
            //             // handle error
            //         }
            //     });
            // });
        });
    </script>
}
